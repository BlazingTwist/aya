.# This file is a part of Aya: https://github.com/nick-paul/aya-lang

.# test.aya
.# Defines an interface for testing aya code

{, } :test;

.# New simpler test function
{blk,
    {
        blk :!
    } {ex,
        ex.` :T ::dict = {
            ["Test Failed: $blk"
             "\tExpected: $(ex.expected.`)"
             "\tReceived: $(ex.received.`)"] "\n"* :P
        } {
            "Error while evaluating test $blk\n$ex" .D
        } .?
    } .K
} test.:test;